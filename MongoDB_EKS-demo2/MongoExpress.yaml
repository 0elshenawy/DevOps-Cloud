#MongoExpress-Deployment 
apiVersion: apps/v1
kind: Deployment
metadata: 
  name: mongexp-deploy 
spec:
    selector:
      matchLabels:
        app: mongo-express 
    template:
      metadata:
        labels:
          app: mongo-express
      spec:
        containers:
          - name: mongo-express-container
            image: mongo-express
            ports:
              - containerPort: 8081
            env:
              - name: ME_CONFIG_MONGODB_ADMINUSERNAME
                valueFrom:
                  secretKeyRef:
                    name: mongodb-secret
                    key: username
              - name: ME_CONFIG_MONGODB_ADMINPASSWORD
                valueFrom:
                  secretKeyRef:
                    name: mongodb-secret
                    key: password
              - name: ME_CONFIG_MONGODB_SERVER
                valueFrom:
                  configMapKeyRef:
                    name: mo-cm
                    key: database_url
              - name: ME_CONFIG_MONGODB_PORT
                value: "27017"
              - name: ME_CONFIG_MONGODB_URL 
                value: ""   
              - name: ME_CONFIG_MONGODB_AUTH_DATABASE
                value: "admin"   
---
#MongoExpress-Service
apiVersion: v1
kind: Service
metadata:
  name: mongo-express-svc 
spec:
  selector: 
    app: mongo-express
  type: LoadBalancer
  ports:
    - port: 8081
      targetPort: 8081
      nodePort: 31000

